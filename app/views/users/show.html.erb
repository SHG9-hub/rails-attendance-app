<h1>ユーザー詳細</h1>

<p>メールアドレス: <%= @user.email %></p>
<p>登録日: <%= @user.created_at.strftime('%Y年%m月%d日') %></p>

<!-- 新しい出勤打刻を作成するリンクをページ上部に配置 -->
<div style="margin-bottom: 20px;">
  <%= link_to '新しい出勤打刻を作成', new_user_attendance_path(@user), class: "btn btn-primary" %>
</div>
<div style="margin-bottom: 20px;">
  <%= link_to 'ログアウト', destroy_user_session_path, method: :delete, data: { confirm: '本当にログアウトしますか？' }, class: "btn btn-danger" %>
</div>

<h2>勤怠情報</h2>
<table>
  <thead>
    <tr>
      <th>出勤時間</th>
      <th>退勤時間</th>
      <th>勤務時間</th>
      <th>退勤</th>  <!-- 操作列を追加 -->
    </tr>
  </thead>
  <tbody>
    <% @attendances.each do |attendance| %>
      <tr>
        <td><%= attendance.check_in.strftime('%Y年%m月%d日 %H:%M') if attendance.check_in %></td>
        <td><%= attendance.check_out.strftime('%Y年%m月%d日 %H:%M') if attendance.check_out %></td>
        <td>
          <% if attendance.check_in && attendance.check_out %>
            <%= ((attendance.check_out - attendance.check_in) / 3600).round(2) %> 時間
          <% else %>
            -
          <% end %>
        </td>
        <td>
          <%= link_to '退勤', edit_user_attendance_path(user_id: @user.id, id: attendance.id) %>  <!-- attendance.idを使用 -->
        </td>
      </tr>
    <% end %>
  </tbody>
</table>